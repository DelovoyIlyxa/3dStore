{% extends "base.html" %}

{% block content %}
<h1 style="font-size: 32px; margin: 32px 0; font-weight: 700;">Каталог 3D-моделей</h1>

<div class="grid">
{% for product in products %}
    <div class="card">
        <div class="card-img">
            {% if product.preview_image %}
                <img src="{{ url_for('static', filename='uploads/' + product.preview_image) }}" 
                     alt="{{ product.title }}" style="width:100%; height:100%; object-fit:cover;">
            {% elif product.file_path.endswith('.glb') %}
                <i class="fas fa-cube" style="font-size:48px; color:#ff2a6d"></i>
            {% else %}
                <i class="fas fa-file-alt" style="font-size:48px; color:#4ecdc4"></i>
            {% endif %}
        </div>
        <div class="card-body">
            <h3 class="card-title">{{ product.title }}</h3>
            <p style="color:var(--text-secondary); margin-bottom: 12px;">{{ product.description[:80] }}...</p>
            <div class="card-meta">
                <span><i class="fas fa-tag"></i> {{ "%.2f"|format(product.price) }} $</span>
                <span><i class="fas fa-user"></i> {{ product.seller.email.split('@')[0] }}</span>
            </div>
            <a href="{{ url_for('shop.product_detail', product_id=product.id) }}" class="btn" style="width:100%; margin-top:12px;">
                <i class="fas fa-eye"></i> Посмотреть
            </a>
        </div>
    </div>
{% endfor %}
</div>

{% if not products %}
    <div style="text-align:center; padding:60px; color:var(--text-secondary);">
        <i class="fas fa-cube" style="font-size:64px; margin-bottom:20px; opacity:0.3"></i>
        <h3>Каталог пуст</h3>
        <p>Станьте продавцом и загрузите первую 3D-модель!</p>
        <a href="{{ url_for('shop.upload') }}" class="btn" style="margin-top:20px;">
            <i class="fas fa-upload"></i> Загрузить модель
        </a>
    </div>
{% endif %}
{% endblock %}